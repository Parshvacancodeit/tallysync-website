{% extends "base.html" %}
{% block content %}
<h2>ğŸ“„ XML Preview</h2>

<pre style="background:#111;color:#0f0;padding:1rem;height:300px;overflow:auto;">
{{ xml_data }}
</pre>

{% if connector_configured %}
<button id="syncBtn" class="btn btn-success">ğŸš€ Sync with Tally</button>
{% else %}
<p style="color:red;">âš ï¸ Configure connector first</p>
{% endif %}

<script>
document.getElementById('syncBtn')?.addEventListener('click', async () => {
    const res = await fetch('/sync-with-tally', { method: 'POST' })
    const data = await res.json()
    alert(data.success ? "âœ… Sent to Tally" : data.message)
})
</script>
{% endblock %}
